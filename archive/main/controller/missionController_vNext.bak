@lazyGlobal off.

//#include "0:/boot/bootLoader_vNext"

local missionCache to "local:/missionPlan_" + ship:name:replace(" ","_") + ".json".
local missionPlan  to "".

// 
if exists(missionCache)
{
    set missionPlan to readJson(missionCache).
}
else
{
    set missionPlan to queue("mission/simple_orbit").
    writeJson(missionPlan, missionCache).
}

until missionPlan:length = 0 
{
    clearScreen.
    local curScript to download(missionPlan:pop()).
    hudtext("Running next script in mission plan: " + curScript, 10, 2, 20, green, false).
    runPath(curScript).
    hudtext("Mission script complete, removing: " + curScript, 10, 2, 20, green, false).
    deletePath(curScript).
    writeJson(missionPlan, missionCache).
} 
deletePath(missionCache).